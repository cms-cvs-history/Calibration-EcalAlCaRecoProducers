process recHitsToAlCaPi0RecHitsProcess = 
{

// L1 trigger

 include "L1TriggerConfig/L1GeometryProducers/data/l1CaloGeometry.cfi"
 include "L1TriggerConfig/L1GeometryProducers/data/l1CaloGeomRecordSource.cff"

  include "L1Trigger/L1ExtraFromDigis/data/l1extra.cff"


// List of ECAL FEDs

include "RecoEgamma/EgammaHLTProducers/data/ecalRegionalEgammaFEDs.cfi"

// Unpacking Digis, based on FED list

module  ecalRegionalEgammaDigis = ecalRawToDigiDev from "HLTrigger/Configuration/data/rawToDigi/ecalRawToDigiDev.cfi"
replace ecalRegionalEgammaDigis.FedLabel = "ecalRegionalEgammaFEDs"
replace ecalRegionalEgammaDigis.InputLabel = "ecaldigitorawzerosup"


// ecalReco sequence

include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
module  ecalRegionalEgammaWeightUncalibRecHit = ecalWeightUncalibRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalWeightUncalibRecHit.cfi"
replace ecalRegionalEgammaWeightUncalibRecHit.EBdigiCollection = ecalRegionalEgammaDigis
replace ecalRegionalEgammaWeightUncalibRecHit.EEdigiCollection = ecalRegionalEgammaDigis

module  ecalRegionalEgammaRecHit = ecalRecHit from "RecoLocalCalo/EcalRecProducers/data/ecalRecHit.cfi"
replace ecalRegionalEgammaRecHit.EBuncalibRecHitCollection = ecalRegionalEgammaWeightUncalibRecHit:EcalUncalibRecHitsEB
replace ecalRegionalEgammaRecHit.EEuncalibRecHitCollection = ecalRegionalEgammaWeightUncalibRecHit:EcalUncalibRecHitsEE

// do not touch the ES

include "RecoLocalCalo/EcalRecProducers/data/ecalPreshowerRecHit.cfi"

sequence ecalRegionalEgammaRecoSequence = { 
  ecalRegionalEgammaFEDs , ecalRegionalEgammaDigis ,  
  ecalRegionalEgammaWeightUncalibRecHit , ecalRegionalEgammaRecHit &
  ecalPreshowerRecHit }




  include "CalibCalorimetry/EcalTrivialCondModules/data/EcalTrivialCondRetriever.cfi"
  include "Geometry/EcalMapping/data/EcalMapping.cfi"
es_source eegeom = EmptyESSource {
   string recordName = "EcalMappingRcd"
   vuint32 firstValid = { 1 }
   bool iovIsRunNotTime = false  
}
  include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"
  include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

  include "Calibration/EcalAlCaRecoProducers/data/alcastreamEcalPi0.cff"
  include "Calibration/EcalAlCaRecoProducers/data/alcastreamEcalPi0Output.cff"


  source = PoolSource 
  {
    # Number of events program should run
    untracked vstring fileNames = {
	'file:hgg_120_raw_10ev.root'
    }
    untracked int32 maxEvents = -1
  }


  module out = PoolOutputModule
  {
     untracked string fileName = "alCaPi0.root" 
     using alcastreamEcalPi0Output
  }

  path pathAlcastreamEcalPi0 = {l1emulator,l1extra,ecalRegionalEgammaRecoSequence,seqAlcastreamEcalPi0}
  endpath outpath = { out }
}
